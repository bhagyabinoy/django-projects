{% extends 'base.html' %}
{% load static %}
{% block title %}
    <title>Signpage</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

    <link rel="stylesheet" href="{% static 'style.css' %}">
{% endblock %} 
{% block content %}
    <br>
    <br>
        <h1 class = text-center alert alert-danger>TASK MANAGEMENT SYSTEM</h1> 
    <br>
    <br>

    <div class="container border p-4 rounded col-4 ">
        <h3 class ="p-3 text-center"> Signup Form </h3> 
        <form method = "POST" action="{% url 'signup' %}" id="signupForm">
                {% csrf_token %}

                <div class="form-group">
                    <label for="first_name">First Name</label>
                    <input type="text" class="form-control" id="id_first_name" name="first_name" placeholder="Enter first name">
                </div>
                
                <div class="form-group">
                    <label for="last_name">Last Name</label>
                    <input type="text" class="form-control" id="id_last_name" name="last_name" placeholder="Enter last name">
                </div>
        
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" class="form-control" id="id_username" name="username" placeholder="Enter username">
                </div>
                
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="email" class="form-control" id="id_email" name="email" placeholder="Enter email">
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" class="form-control" id="id_password" name="password" placeholder="Password">
                </div>
                
                <div class="form-group">
                    <label for="re_password">Confirm Password</label>
                    <input type="password" class="form-control" id="id_re_password" name="re_password" placeholder="Confirm Password">
                </div>
            
                
                <center> <input type="submit" class="btn btn-success m-3 p-2 " value = "signup" id="signup"> </center>
         
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
    
    <script>
        $(document).on('submit', '#signupForm', function(event){
            event.preventDefault();
            var first_name = $('#id_first_name').val()
            var last_name = $('#id_last_name').val()
            var username = $('#id_username').val()
            var email = $('#id_email').val()
            var password = $('#id_password').val()
            var re_password = $('#id_re_password').val()

            $.ajax({
                url : "{% url 'signup' %}", 
                type : "POST",
                data : {
                    first_name: first_name,
                    last_name: last_name,
                    username: username,
                    email:email,
                    password: password,
                    re_password: re_password
                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                },
                success:function(response){
                    console.log(response)
                }
            })
        })
    </script> 
{% endblock %} 